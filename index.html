@baseUrl = http://localhost:8000/api
@riderToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.rider_mock_token_123
@driverToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.driver_mock_token_456
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.admin_master_token_789
@rideId = jdp_ride_987654321
@driverId = drv_102938
@riderId = rdr_564738

### ============================================================================
### AUTHENTICATION (COMMON) - JDP CABS
### ============================================================================

### 1. Rider - Send OTP
POST {{baseUrl}}/auth/rider/send-otp
Content-Type: application/json

{
  "phone": "+919876543210"
}

### 2. Rider - Verify OTP & Login
POST {{baseUrl}}/auth/rider/verify-otp
Content-Type: application/json

{
  "phone": "+919876543210",
  "otp": "1234",
  "fcmToken": "firebase_fcm_token_for_live_notifications"
}

### 3. Driver - Send OTP
POST {{baseUrl}}/auth/driver/send-otp
Content-Type: application/json

{
  "phone": "+918765432109"
}

### 4. Driver - Verify OTP & Login
POST {{baseUrl}}/auth/driver/verify-otp
Content-Type: application/json

{
  "phone": "+918765432109",
  "otp": "5678",
  "fcmToken": "firebase_fcm_token_for_requests"
}

### 5. Driver - Register Vehicle & License (Onboarding)
POST {{baseUrl}}/auth/driver/register
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "fullName": "Ramesh Kumar",
  "vehicleType": "auto",
  "vehicleNumber": "CG 17 XX 0000",
  "licenseNumber": "CG1720150001234",
  "licensePhotoUrl": "https://jdpcabs.firebasestorage.app/docs/license_123.jpg",
  "rcBookUrl": "https://jdpcabs.firebasestorage.app/docs/rc_123.jpg",
  "preferredZone": "CentralZone"
}


### ============================================================================
### RIDER FEATURES - PASSENGER APP
### ============================================================================

### 6. Rider - Get Profile
GET {{baseUrl}}/riders/me
Authorization: Bearer {{riderToken}}

### 7. Rider - Update Profile
PUT {{baseUrl}}/riders/me
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "name": "Amit Sharma",
  "email": "amit.sharma@email.com",
  "emergencyContact": "+919988776655"
}

### 8. Rider - Add Saved Place
POST {{baseUrl}}/riders/me/saved-places
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "label": "Home",
  "address": "Dharampura, Near Dalpat Sagar, CentralZone",
  "lat": 19.0815,
  "lng": 82.0125
}

### 9. Rider - Get Saved Places
GET {{baseUrl}}/riders/me/saved-places
Authorization: Bearer {{riderToken}}

### 10. Rider - Get Fare Estimate (MapMyIndia Routing Integration)
POST {{baseUrl}}/rides/estimate
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "pickup": {
    "address": "Main Market, NorthZone",
    "lat": 19.0950,
    "lng": 82.0200
  },
  "drop": {
    "address": "Railway Station, SouthZone",
    "lat": 19.0650,
    "lng": 82.0100
  }
}

### 11. Rider - Book Live Ride (Multi-stop & Vehicle Selection)
POST {{baseUrl}}/rides/book
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "vehicleType": "auto",
  "pickup": {
    "address": "Main Market, NorthZone",
    "lat": 19.0950,
    "lng": 82.0200
  },
  "stops": [
    {
      "address": "Sanjay Market, CentralZone",
      "lat": 19.0800,
      "lng": 82.0150
    }
  ],
  "drop": {
    "address": "Railway Station, SouthZone",
    "lat": 19.0650,
    "lng": 82.0100
  },
  "paymentMethod": "UPI"
}

### 12. Rider - Track Live Ride (Polling / Firebase sync check)
GET {{baseUrl}}/rides/{{rideId}}/track
Authorization: Bearer {{riderToken}}

### 13. Rider - Share My Trip
POST {{baseUrl}}/rides/{{rideId}}/share
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "contacts": ["+919988776655"]
}

### 14. Rider - Emergency / SOS Alert
POST {{baseUrl}}/rides/{{rideId}}/sos
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "lat": 19.0760,
  "lng": 82.0150,
  "reason": "Driver driving recklessly and off-route"
}

### 15. Rider - Cancel Ride
POST {{baseUrl}}/rides/{{rideId}}/cancel
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "reason": "Driver denied duty"
}

### 16. Rider - Rate Driver & Tip
POST {{baseUrl}}/rides/{{rideId}}/rate
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "rating": 5,
  "feedback": "Polite driver, clean auto.",
  "tipAmount": 20
}

### 17. Rider - Payment Callback (Simulate UPI Success)
POST {{baseUrl}}/rides/{{rideId}}/pay
Authorization: Bearer {{riderToken}}
Content-Type: application/json

{
  "method": "UPI",
  "amount": 120.00,
  "transactionId": "UPI9876543210XZ",
  "status": "SUCCESS"
}

### 18. Rider - Get Ride History
GET {{baseUrl}}/riders/me/rides?page=1&limit=10
Authorization: Bearer {{riderToken}}


### ============================================================================
### DRIVER FEATURES - PARTNER APP
### ============================================================================

### 19. Driver - Go Online / Offline
PATCH {{baseUrl}}/drivers/me/status
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "isOnline": true,
  "currentZone": "NorthZone"
}

### 20. Driver - Update Live Location (Firebase Live Tracking Sink)
PUT {{baseUrl}}/drivers/me/location
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "lat": 19.0965,
  "lng": 82.0210,
  "heading": 145.2,
  "speed": 35.5,
  "zone": "NorthZone"
}

### 21. Driver - Get Pending Ride Requests (Nearby)
GET {{baseUrl}}/drivers/me/ride-requests
Authorization: Bearer {{driverToken}}

### 22. Driver - Accept Ride Request
POST {{baseUrl}}/rides/{{rideId}}/accept
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "driverLat": 19.0965,
  "driverLng": 82.0210
}

### 23. Driver - Reject Ride Request
POST {{baseUrl}}/rides/{{rideId}}/reject
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "reason": "Too far away"
}

### 24. Driver - Arrived at Pickup
POST {{baseUrl}}/rides/{{rideId}}/arrive
Authorization: Bearer {{driverToken}}

### 25. Driver - Start Trip (Verify Rider OTP)
POST {{baseUrl}}/rides/{{rideId}}/start
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "otp": "4812"
}

### 26. Driver - End Trip
POST {{baseUrl}}/rides/{{rideId}}/end
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "dropLat": 19.0650,
  "dropLng": 82.0100,
  "distanceTravelledKm": 4.2
}

### 27. Driver - Enable Destination Mode (Only get rides towards home)
POST {{baseUrl}}/drivers/me/destination-mode
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "enabled": true,
  "destination": {
    "address": "Bastar University Road, SouthZone",
    "lat": 19.0550,
    "lng": 82.0050
  }
}

### 28. Driver - Disable Destination Mode
POST {{baseUrl}}/drivers/me/destination-mode
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "enabled": false
}

### 29. Driver - Earnings Summary (Today / This Week)
GET {{baseUrl}}/drivers/me/earnings?filter=today
Authorization: Bearer {{driverToken}}

### 30. Driver - Instant Cashout (Simulate Payout)
POST {{baseUrl}}/drivers/me/cashout
Authorization: Bearer {{driverToken}}
Content-Type: application/json

{
  "amount": 500.00,
  "payoutMethod": "UPI_ID",
  "upiId": "ramesh.driver@okhdfcbank"
}

### 31. Driver - Get Profile & Ratings
GET {{baseUrl}}/drivers/me
Authorization: Bearer {{driverToken}}


### ============================================================================
### ADMIN PANEL / DASHBOARD FEATURES (NEW)
### ============================================================================

### 32. Admin - Get Live Dashboard Stats (Total Rides, Revenue, Online Drivers)
GET {{baseUrl}}/admin/dashboard/stats
Authorization: Bearer {{adminToken}}

### 33. Admin - Get All Active & Ongoing Rides in Jagdalpur
GET {{baseUrl}}/admin/rides/active
Authorization: Bearer {{adminToken}}

### 34. Admin - Get Pending Driver Approvals (Document Verification)
GET {{baseUrl}}/admin/drivers/pending
Authorization: Bearer {{adminToken}}

### 35. Admin - Approve a Driver Account
POST {{baseUrl}}/admin/drivers/{{driverId}}/approve
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "status": "APPROVED",
  "commissionRate": 10
}

### 36. Admin - Block / Suspend a Driver or Rider
POST {{baseUrl}}/admin/users/{{driverId}}/suspend
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "reason": "Multiple customer complaints regarding extra fare."
}

### 37. Admin - Process Driver Cashout Request
POST {{baseUrl}}/admin/payouts/{{driverId}}/process
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "amount": 500.00,
  "transactionId": "BNK9876543210",
  "status": "COMPLETED"
}

### 38. Admin - Update Base Fare & Settings
PUT {{baseUrl}}/admin/settings/fares
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "autoBaseFare": 25,
  "autoPerKm": 12,
  "cabBaseFare": 45,
  "cabPerKm": 16,
  "surgePricingEnabled": false
}


### ============================================================================
### SHARED / SYSTEM WEBHOOKS
### ============================================================================

### 39. Shared - Get Full Trip Details by ID
GET {{baseUrl}}/rides/{{rideId}}
Authorization: Bearer {{riderToken}}

### 40. Admin/System - MapMyIndia / Firebase Status Webhook
PATCH {{baseUrl}}/rides/{{rideId}}/status
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "status": "COMPLETED",
  "updatedBy": "SYSTEM_GEOFENCE_TRIGGER",
  "notes": "Auto-completed based on MMI geofence entry at drop location."
}

### 41. Shared - Get Nearby Drivers (Map Plotting for Rider App)
GET {{baseUrl}}/cabs/nearby?lat=19.0950&lng=82.0200&radius=3&vehicleType=auto
Authorization: Bearer {{riderToken}}

